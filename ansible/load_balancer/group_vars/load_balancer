---
# The variables file used by the playbooks in the load_balancers group

run_lagpous_script: ~/run_lagopus.sh

hugepage:
  setup: true
  size: 2048kB # or 1048576kB
  nodes:
    - id: 0
      number_of_pages: 512
#    - id: 1
#      number_of_pages: 512

dpdk_ifaces:
# vhost_user: []
  vhost_user:
    - id: 0
      socket: /tmp/sock0
    - id: 1
      socket: /tmp/sock1
    - id: 2
      socket: /tmp/sock2
    - id: 3
      socket: /tmp/sock3
  pipe: []
#  pipe:
#    - id: 0
#    - id: 1
#  physical: []
  pysical:
     - 0000:05:00.0
     - 0000:05:00.1

lagopus:
  compile: true
  repository: https://github.com/lagopus/lagopus-next-virtio
  version: master
  configure_option:
  make_option: gcc-full-opt -j 4
  src_dir: /usr/local/src/lagopus
  cpumask: e
  memory_channels: 4
  portmask: 3f
  allocate_hugepages: 1024 # MB
  dsl: /usr/local/etc/lagopus/lagopus.dsl
  log: /tmp/lagopus.log

  controllers:
    - name: controller01
      channel:
        dst_addr: 127.0.0.1
        protocol: tcp
      role: equal
      connection_type: main

  # dpdk_interfaces: []
  dpdk_interfaces:
    - name: interface00
      port_number: 0
    - name: interface01
      port_number: 1
    - name: interface02
      port_number: 2
    - name: interface03
      port_number: 3
    - name: interface04
      port_number: 4
    - name: interface05
      port_number: 5

  rawsock_interfaces: []
  # rawsock_interfaces:
  #   - name: interface00
  #     device: veth0
  #   - name: interface01
  #     device: veth1

  ports:
    - name: port01
      interface: interface00
    - name: port02
      interface: interface01
    - name: port03
      interface: interface02
    - name: port04
      interface: interface03
    - name: port05
      interface: interface04
    - name: port06
      interface: interface05

  bridges:
    - name: bridge01
      controller: controller01
      dpid: 0x01
      ports:
        - name: port05
          OF_port: 1
        - name: port06
          OF_port: 2
        - name: port01
          OF_port: 3
        - name: port02
          OF_port: 4
        - name: port03
          OF_port: 5
        - name: port04
          OF_port: 6
